@startuml FusionSpace Login and Registration Use Cases

left to right direction

' Actors
actor "User" as user
actor "System" as system
actor "Google Auth" as google
actor "Microsoft Auth" as microsoft
actor "Email Service" as email

rectangle "Authentication System" {
    ' Login Use Cases
    package "Login" {
        usecase "Login with Credentials" as UC1
        usecase "Login with Google" as UC2
        usecase "Login with Microsoft" as UC3
        usecase "Forgot Password" as UC4
        usecase "Verify Login" as UC5
        usecase "Reset Password" as UC6
        usecase "2FA Verification" as UC7
    }

    ' Registration Use Cases
    package "Registration" {
        usecase "Register New Account" as UC8
        usecase "Register with Google" as UC9
        usecase "Register with Microsoft" as UC10
        usecase "Verify Email" as UC11
        usecase "Create User Profile" as UC12
        usecase "Accept Terms & Conditions" as UC13
        usecase "Select User Role" as UC14
    }
}

' Login relationships
user --> UC1
user --> UC2
user --> UC3
user --> UC4

UC1 ..> UC5 : <<include>>
UC2 ..> UC5 : <<include>>
UC3 ..> UC5 : <<include>>
UC5 ..> UC7 : <<extends>>
UC4 ..> UC6 : <<include>>
UC6 ..> UC7 : <<extends>>

' Registration relationships
user --> UC8
user --> UC9
user --> UC10

UC8 ..> UC11 : <<include>>
UC8 ..> UC12 : <<include>>
UC8 ..> UC13 : <<include>>
UC8 ..> UC14 : <<include>>

UC9 ..> UC12 : <<include>>
UC9 ..> UC13 : <<include>>
UC9 ..> UC14 : <<include>>

UC10 ..> UC12 : <<include>>
UC10 ..> UC13 : <<include>>
UC10 ..> UC14 : <<include>>

' System relationships
system --> UC5
system --> UC11
system --> UC7

' Auth Provider relationships
google --> UC2
google --> UC9

microsoft --> UC3
microsoft --> UC10

' Email Service relationships
email --> UC11
email --> UC6

' Notes
note "Password must meet\nsecurity requirements" as N1
N1 .. UC8

note "2FA is optional but\nrecommended" as N2
N2 .. UC7

note "Email verification\nis mandatory" as N3
N3 .. UC11

note "Roles: Student,\nTeaching Staff,\nAdmin" as N4
N4 .. UC14

note "OAuth2.0 used for\nthird-party auth" as N5
N5 .. UC2
N5 .. UC3

@enduml