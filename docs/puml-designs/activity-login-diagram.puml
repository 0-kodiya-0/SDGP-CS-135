@startuml
start

:User sends a request to the URL;
:Server receives the request;

if (Is URL valid?) then (yes)
  :Route the request to the appropriate controller;
  :Checks if the JWT token exists;
  if (Authenticated?) then (yes)
    :Process request logic;
    :Access database or external services;
    if (Operation successful?) then (yes)
      :Generate response data;
      :Create a new JWT token;
      :Send response back to the user;
      :Redirected to the main working environment;
      stop
    else (no)
      :Log the error;
      :Send error response to the user;
    endif
  else (no)
    :Return 401 Unauthorized response;
  endif
else (no)
  :Return 404 Not Found error;
endif

:User clicks "Sign up" or "Sign in";
if (Sign in clicked) then (yes)
  :Redirects to Sign in page;
  :User enters credentials and clicks sign in;
  :Route the request to the appropriate controller;
  if (Authenticated?) then (yes)
    :Process request logic;
    :Access database or external services;
    if (Operation successful?) then (yes)
      :Generate response data;
      :Create a new JWT token;
      :Send response back to the user;
      :Redirected to the main working environment;
      stop
    else (no)
      :Log the error;
      :Send error response to the user;
    endif
  else (no)
    :Redirected to the Sign up page;
  endif
else (Sign up clicked)
  :Redirected to the Sign up page;
  if (Entered details are valid?) then (yes)
    :Save user details in the database;
    :Redirect to Sign in page;
  else (no)
    :Redirect back to Sign up page;
  endif
endif

stop
@enduml
